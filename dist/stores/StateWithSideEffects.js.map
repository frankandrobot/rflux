{"version":3,"sources":["stores/StateWithSideEffects.js"],"names":[],"mappings":";;;;;;;;;;QA6BgB,kB,GAAA,kB;QAuBA,c,GAAA,c;QAKA,W,GAAA,W;;;;;;;;IAtDH,oB,WAAA,oB;AAEX,gCAAY,KAAZ,EAAmB,WAAnB,EAAgC;AAAA;;AAE9B,SAAK,KAAL,GAAa,SAAS,EAAtB;AACA,SAAK,WAAL,GAAmB,eAAe,EAAlC;AACD;;;;4BAEO,2B,EAA6B;;AAEnC,aAAO,IAAI,oBAAJ,cACD,KAAK,KADJ,EACc,4BAA4B,KAD1C,GAEL,KAAK,WAAL,CAAiB,MAAjB,CAAwB,4BAA4B,WAApD,CAFK,CAAP;AAID;;;;;;;;;;;;;;;;;AAYI,SAAS,kBAAT,CAA4B,CAA5B,EAA+B,CAA/B,EAAkC;;AAEvC,MAAM,0BAA0B,aAAa,oBAA7C;AACA,MAAM,0BAA0B,aAAa,oBAA7C;;AAEA,MAAI,2BAA2B,uBAA/B,EAAwD;;AAEtD,WAAO,EAAE,OAAF,CAAU,CAAV,CAAP;AACD,GAHD,MAIK,IAAI,CAAC,uBAAD,IAA4B,CAAC,uBAAjC,EAA0D;;AAE7D,WAAO,IAAI,oBAAJ,cAA6B,CAA7B,EAAmC,CAAnC,EAAP;AACD,GAHI,MAIA,IAAI,2BAA2B,CAAC,uBAAhC,EAAyD;;AAE5D,WAAO,IAAI,oBAAJ,EAA0B,aAAI,EAAE,KAAN,EAAgB,CAAhB,GAAoB,EAAE,WAAhD,EAAP;AACD,GAHI,MAIA,IAAI,CAAC,uBAAD,IAA4B,uBAAhC,EAAyD;;AAE5D,WAAO,IAAI,oBAAJ,cAA6B,CAA7B,EAAmC,EAAE,KAArC,GAA6C,EAAE,WAA/C,CAAP;AACD;AACF;;AAEM,SAAS,cAAT,CAAwB,KAAxB,EAA+C;AAAA,oCAAb,WAAa;AAAb,eAAa;AAAA;;AAEpD,SAAO,IAAI,oBAAJ,CAAyB,KAAzB,EAAgC,WAAhC,CAAP;AACD;;AAEM,SAAS,WAAT,GAAqC;AAAA,qCAAb,WAAa;AAAb,eAAa;AAAA;;AAE1C,SAAO,IAAI,oBAAJ,CAAyB,EAAzB,EAA6B,WAA7B,CAAP;AACD","file":"StateWithSideEffects.js","sourcesContent":["/**\n * Hey, look! Something like a monad\n */\nexport class StateWithSideEffects {\n\n  constructor(state, sideEffects) {\n\n    this.state = state || {}\n    this.sideEffects = sideEffects || []\n  }\n\n  combine(stateOrStateWithSideEffects) {\n\n    return new StateWithSideEffects(\n      {...this.state, ...stateOrStateWithSideEffects.state},\n      this.sideEffects.concat(stateOrStateWithSideEffects.sideEffects)\n    )\n  }\n}\n\n/**\n * In a typed language this method wouldn't exist,\n * but since it's so easy to forget to return the proper class,\n * we add this to help prevent errors.\n *\n * @param a\n * @param b\n * @returns {*}\n */\nexport function combineSideEffects(a, b) {\n\n  const aIsStateWithSideEffects = a instanceof StateWithSideEffects\n  const bIsStateWithSideEffects = b instanceof StateWithSideEffects\n\n  if (aIsStateWithSideEffects && bIsStateWithSideEffects) {\n\n    return a.combine(b)\n  }\n  else if (!aIsStateWithSideEffects && !bIsStateWithSideEffects) {\n\n    return new StateWithSideEffects({...a, ...b})\n  }\n  else if (aIsStateWithSideEffects && !bIsStateWithSideEffects) {\n\n    return new StateWithSideEffects(({...a.state, ...b}, a.sideEffects))\n  }\n  else if (!aIsStateWithSideEffects && bIsStateWithSideEffects) {\n\n    return new StateWithSideEffects({...a, ...b.state}, b.sideEffects)\n  }\n}\n\nexport function addSideEffects(state, ...sideEffects) {\n\n  return new StateWithSideEffects(state, sideEffects)\n}\n\nexport function sideEffects(...sideEffects) {\n\n  return new StateWithSideEffects({}, sideEffects)\n}\n"]}